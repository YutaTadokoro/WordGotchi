# Requirements Document

## Introduction

WordGotchi is an AI-powered virtual pet application that transforms user emotions into art and poetry. Users feed their pet by clicking on scattered words, which are analyzed for emotional content. The pet evolves through stages and expresses accumulated emotions through abstract art and poetry generation, creating an interactive emotional companion experience.

## Glossary

- **WordGotchi**: The AI virtual pet system that consumes words and expresses emotions
- **Gotchi**: The virtual pet character entity
- **Feeding Session**: A single interaction where the user inputs text and feeds words to the Gotchi
- **Emotion Vector**: A numerical representation of seven basic emotions (joy, sadness, anger, fear, surprise, disgust, trust) with values from 0 to 1
- **Evolution Stage**: A distinct developmental phase of the Gotchi with unique capabilities
- **Expression**: An output generated by the Gotchi, either abstract art or poetry
- **Emotion Decay**: The gradual reduction of emotion intensity over time (5% per day)
- **Canvas Area**: The upper display region where the Gotchi and interactions are rendered
- **Input Area**: The lower display region containing text input and controls

## Requirements

### Requirement 1

**User Story:** As a user, I want to input text and feed individual words to my pet, so that I can actively participate in nurturing the pet with my emotions.

#### Acceptance Criteria

1. WHEN a user submits text input THEN the System SHALL decompose the text into individual words and display them scattered across the Canvas Area
2. WHEN a user clicks on a scattered word THEN the System SHALL animate the word moving toward the Gotchi character
3. WHEN a word reaches the Gotchi THEN the System SHALL play an eating animation and remove the word from the display
4. WHEN all words from a Feeding Session are consumed THEN the System SHALL trigger an emotion-specific emote animation
5. WHERE the emotion is joy WHEN the emote triggers THEN the Gotchi SHALL perform a jumping animation

### Requirement 2

**User Story:** As a user, I want my pet to analyze the emotional content of my words, so that it can understand and reflect my feelings.

#### Acceptance Criteria

1. WHEN words are fed to the Gotchi THEN the System SHALL send the text to Claude API via proxy server for emotion analysis
2. WHEN Claude API returns analysis results THEN the System SHALL extract seven emotion values (joy, sadness, anger, fear, surprise, disgust, trust) as numbers between 0 and 1
3. WHEN emotion values are extracted THEN the System SHALL update the Gotchi's internal Emotion Vector by accumulating the new values
4. WHILE time passes THEN the System SHALL apply Emotion Decay at a rate of 5% per day to all emotion values
5. WHEN the Emotion Vector is updated THEN the System SHALL persist the new state to localStorage

### Requirement 3

**User Story:** As a user, I want my pet to generate abstract art based on its emotional state, so that I can visualize the emotions I've shared.

#### Acceptance Criteria

1. WHEN a Feeding Session completes AND the Gotchi is at Stage 2 or higher THEN the System SHALL generate abstract art using Google Gemini Imagen API via proxy server
2. WHEN generating art THEN the System SHALL construct a prompt based on the dominant emotions in the Emotion Vector
3. WHERE the dominant emotion is joy WHEN constructing the prompt THEN the System SHALL include golden and bright color specifications
4. WHERE the dominant emotion is sadness WHEN constructing the prompt THEN the System SHALL include blue and purple deep tone specifications
5. WHEN art generation completes THEN the System SHALL display the artwork in a popup overlay at the center of the Canvas Area
6. WHEN artwork is displayed THEN the System SHALL provide download and save functionality to the user

### Requirement 4

**User Story:** As a user, I want my pet to generate poetry from my words, so that I can see my unspoken feelings expressed in poetic form.

#### Acceptance Criteria

1. WHEN a Feeding Session completes AND the Gotchi is at Stage 2 or higher THEN the System SHALL generate poetry using Claude API via proxy server
2. WHEN generating poetry THEN the System SHALL send the user's input text and current Emotion Vector to Claude API
3. WHEN Claude API generates poetry THEN the System SHALL receive a poem of 3 to 5 lines
4. WHEN poetry is received THEN the System SHALL display the poem in a popup overlay
5. WHEN poetry uses metaphors and symbols THEN the System SHALL avoid direct emotional descriptions

### Requirement 5

**User Story:** As a user, I want my pet to evolve through different stages, so that I can experience growth and progression in our relationship.

#### Acceptance Criteria

1. WHEN the application initializes for the first time THEN the System SHALL create a Gotchi at Stage 1 (Obake)
2. WHILE the Gotchi is at Stage 1 THEN the System SHALL render the character as a transparent white shadow with no defined form
3. WHEN the Gotchi completes 10 Feeding Sessions at Stage 1 THEN the System SHALL trigger evolution to Stage 2 (Furin)
4. WHEN evolution triggers THEN the System SHALL display a special evolution animation with screen-wide light effects and Japanese-style background music
5. WHILE the Gotchi is at Stage 2 THEN the System SHALL enable abstract art generation and poetry generation capabilities

### Requirement 6

**User Story:** As a user, I want to see my pet displayed in an animated canvas area, so that I can enjoy a visually engaging experience.

#### Acceptance Criteria

1. WHEN the application loads THEN the System SHALL render a Canvas Area of 400px height spanning the full width
2. WHILE the Gotchi is displayed THEN the System SHALL animate the character with a floating motion
3. WHEN rendering the Canvas Area background THEN the System SHALL apply a gradient from deep purple (#0a0014) to black
4. WHEN the Gotchi has an active Emotion Vector THEN the System SHALL render a glow effect around the character with colors corresponding to the dominant emotion
5. WHEN words are scattered during feeding THEN the System SHALL display them within the Canvas Area boundaries

### Requirement 7

**User Story:** As a user, I want to input text through a simple interface, so that I can easily feed my pet without complexity.

#### Acceptance Criteria

1. WHEN the application loads THEN the System SHALL display an Input Area below the Canvas Area
2. WHEN rendering the Input Area THEN the System SHALL provide a text input field with a maximum capacity of 500 characters
3. WHEN the user types in the input field THEN the System SHALL display the remaining character count
4. WHEN the user clicks the submit button THEN the System SHALL initiate a Feeding Session with the input text
5. WHEN displaying status information THEN the System SHALL show the number of feedings remaining until next evolution and current emotion balance

### Requirement 8

**User Story:** As a user, I want my pet's data to be saved automatically, so that I don't lose progress when I close the browser.

#### Acceptance Criteria

1. WHEN the Gotchi state changes THEN the System SHALL serialize the state to JSON format and store it in localStorage
2. WHEN storing Gotchi state THEN the System SHALL include evolution stage, Emotion Vector, and personality data
3. WHEN a Feeding Session completes THEN the System SHALL append the feeding record to localStorage with input text and emotion analysis results
4. WHEN storing feeding history THEN the System SHALL maintain a maximum of 1000 recent records
5. WHEN storing Expression works THEN the System SHALL maintain a maximum of 500 recent generated artworks and poems
6. WHEN localStorage data exceeds 5MB THEN the System SHALL automatically delete the oldest records to maintain the size limit

### Requirement 9

**User Story:** As a user, I want to export and import my pet's data, so that I can transfer it to another browser or device.

#### Acceptance Criteria

1. WHEN the user requests data export THEN the System SHALL retrieve all Gotchi data from localStorage and format it as a downloadable JSON file
2. WHEN the user provides an import file THEN the System SHALL validate the JSON structure before importing
3. WHEN import validation succeeds THEN the System SHALL replace current localStorage data with the imported data
4. WHEN import validation fails THEN the System SHALL display an error message and maintain the current state
5. WHEN data is imported successfully THEN the System SHALL reload the application to reflect the imported Gotchi state

### Requirement 10

**User Story:** As a user, I want smooth and natural animations throughout the interface, so that the experience feels polished and engaging.

#### Acceptance Criteria

1. WHEN any animation plays THEN the System SHALL apply easing functions to create natural motion
2. WHEN words fly toward the Gotchi THEN the System SHALL use a bezier curve trajectory for organic movement
3. WHEN the Gotchi performs emotes THEN the System SHALL complete the animation within 2 seconds
4. WHEN popups appear or disappear THEN the System SHALL use fade and scale transitions
5. WHEN the Gotchi floats THEN the System SHALL use a sine wave function to create smooth up-and-down motion

